<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>For Cristal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
        }

        /* ============ STARRY BACKGROUND ============ */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
            animation-delay: var(--delay);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* ============ MOON ============ */
        .moon {
            position: fixed;
            top: 40px;
            right: 40px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #fef9c3 0%, #fde68a 100%);
            border-radius: 50%;
            box-shadow:
                0 0 40px rgba(254, 249, 195, 0.5),
                0 0 80px rgba(254, 249, 195, 0.3),
                inset -10px -10px 20px rgba(251, 191, 36, 0.3);
            animation: moonGlow 4s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes moonGlow {
            0%, 100% { box-shadow: 0 0 40px rgba(254, 249, 195, 0.5), 0 0 80px rgba(254, 249, 195, 0.3), inset -10px -10px 20px rgba(251, 191, 36, 0.3); }
            50% { box-shadow: 0 0 60px rgba(254, 249, 195, 0.7), 0 0 100px rgba(254, 249, 195, 0.4), inset -10px -10px 20px rgba(251, 191, 36, 0.3); }
        }

        /* ============ SCENES ============ */
        .scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
        }

        .scene.active {
            opacity: 1;
            pointer-events: all;
        }

        /* ============ TITLE SCREEN ============ */
        #title-screen {
            text-align: center;
            padding: 20px;
        }

        .title-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid rgba(255, 182, 193, 0.6);
            box-shadow: 0 0 30px rgba(255, 182, 193, 0.4);
            margin-bottom: 30px;
            object-fit: cover;
            background: linear-gradient(135deg, #2d2d44 0%, #1a1a2e 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .title-photo span {
            font-size: 40px;
        }

        .main-title {
            font-size: clamp(1.8rem, 6vw, 2.8rem);
            color: #fce7f3;
            text-shadow: 0 0 20px rgba(252, 231, 243, 0.5);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .subtitle {
            font-size: clamp(1rem, 3vw, 1.3rem);
            color: #c4b5fd;
            margin-bottom: 40px;
            font-weight: 500;
        }

        /* Floating Z's */
        .zzz-container {
            position: absolute;
            top: 20%;
            left: 15%;
        }

        .zzz {
            font-size: 24px;
            color: #c4b5fd;
            opacity: 0;
            animation: floatZ 3s ease-in-out infinite;
        }

        .zzz:nth-child(1) { animation-delay: 0s; }
        .zzz:nth-child(2) { animation-delay: 1s; font-size: 20px; }
        .zzz:nth-child(3) { animation-delay: 2s; font-size: 16px; }

        @keyframes floatZ {
            0% { opacity: 0; transform: translate(0, 0) rotate(-10deg); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translate(30px, -60px) rotate(10deg); }
        }

        .start-btn {
            padding: 18px 50px;
            font-size: 1.3rem;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            background: linear-gradient(135deg, #f472b6 0%, #c084fc 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(244, 114, 182, 0.4);
            transition: all 0.3s ease;
            animation: btnPulse 2s ease-in-out infinite;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 30px rgba(244, 114, 182, 0.6);
        }

        @keyframes btnPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        /* ============ GAME SCREEN ============ */
        #game-screen {
            justify-content: flex-end;
            padding-bottom: 0;
        }

        .progress-counter {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
            color: #e9d5ff;
            background: rgba(30, 30, 50, 0.8);
            padding: 10px 25px;
            border-radius: 30px;
            border: 2px solid rgba(192, 132, 252, 0.3);
        }

        /* Fence and Ground */
        .ground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 25%;
            background: linear-gradient(180deg, #1e3a1e 0%, #0f2010 100%);
            border-top: 3px solid #2d5a2d;
        }

        .fence {
            position: absolute;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 30px;
            z-index: 5;
        }

        .fence-post {
            width: 15px;
            height: 100px;
            background: linear-gradient(90deg, #8b5a2b 0%, #a0522d 50%, #8b5a2b 100%);
            border-radius: 3px;
            position: relative;
        }

        .fence-post::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 15px;
            background: linear-gradient(180deg, #a0522d 0%, #8b5a2b 100%);
            border-radius: 5px 5px 0 0;
        }

        .fence-rail {
            position: absolute;
            left: -20px;
            width: calc(100% + 40px);
            height: 12px;
            background: linear-gradient(180deg, #a0522d 0%, #8b5a2b 100%);
            border-radius: 3px;
        }

        .fence-rail.top { top: 15px; }
        .fence-rail.bottom { top: 55px; }

        /* ============ SHEEP ============ */
        .sheep-container {
            position: absolute;
            bottom: 25%;
            left: -150px;
            z-index: 10;
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        .sheep-container:hover {
            transform: scale(1.1);
        }

        .sheep-container.jumping {
            animation: sheepJump 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes sheepJump {
            0% { left: -150px; bottom: 25%; }
            25% { left: 20%; bottom: 55%; }
            50% { left: 50%; bottom: 65%; }
            75% { left: 80%; bottom: 55%; }
            100% { left: calc(100% + 150px); bottom: 25%; }
        }

        .sheep {
            position: relative;
            width: 120px;
            height: 90px;
        }

        .sheep svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
        }

        /* Gentle bobbing animation for the sheep */
        .sheep-container:not(.clicked) .sheep {
            animation: sheepBob 1s ease-in-out infinite;
        }

        @keyframes sheepBob {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-5px) rotate(2deg); }
        }

        /* Sheep Click Effect */
        .sheep-container.clicked {
            animation: sheepPoof 0.5s ease forwards;
        }

        @keyframes sheepPoof {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.8; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* Hearts burst effect */
        .hearts-burst {
            position: absolute;
            top: 50%;
            left: 50%;
            pointer-events: none;
        }

        .burst-heart {
            position: absolute;
            font-size: 24px;
            animation: burstOut 1s ease-out forwards;
        }

        @keyframes burstOut {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(1); opacity: 0; }
        }

        /* ============ MESSAGE CARD ============ */
        .message-card {
            position: absolute;
            bottom: 30%;
            left: 50%;
            transform: translateX(-50%) translateY(50px);
            background: rgba(30, 30, 50, 0.95);
            border: 2px solid rgba(244, 114, 182, 0.4);
            border-radius: 20px;
            padding: 30px 40px;
            max-width: 90%;
            width: 400px;
            text-align: center;
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 20;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .message-card.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .message-text {
            font-size: 1.3rem;
            color: #fce7f3;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .next-btn {
            padding: 12px 35px;
            font-size: 1rem;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            background: linear-gradient(135deg, #c084fc 0%, #a855f7 100%);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(168, 85, 247, 0.4);
        }

        /* ============ FINAL SCREEN ============ */
        #final-screen {
            text-align: center;
            padding: 20px;
        }

        .sleeping-sheep-pile {
            position: relative;
            width: 280px;
            height: 80px;
            margin-bottom: 30px;
        }

        .mini-sheep {
            position: absolute;
            filter: drop-shadow(1px 2px 3px rgba(0,0,0,0.2));
        }

        .mini-sheep .sheep {
            animation: sleepyBob 3s ease-in-out infinite;
        }

        .mini-sheep:nth-child(2) .sheep { animation-delay: 0.5s; }
        .mini-sheep:nth-child(3) .sheep { animation-delay: 1s; }
        .mini-sheep:nth-child(4) .sheep { animation-delay: 1.5s; }
        .mini-sheep:nth-child(5) .sheep { animation-delay: 2s; }

        @keyframes sleepyBob {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .final-photo {
            width: 180px;
            height: 180px;
            border-radius: 20px;
            border: 4px solid rgba(255, 182, 193, 0.6);
            box-shadow: 0 0 40px rgba(255, 182, 193, 0.4);
            margin-bottom: 30px;
            object-fit: cover;
            background: linear-gradient(135deg, #2d2d44 0%, #1a1a2e 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .final-photo span {
            font-size: 60px;
        }

        .final-message {
            max-width: 500px;
            margin: 0 auto;
        }

        .final-title {
            font-size: clamp(1.5rem, 5vw, 2rem);
            color: #fce7f3;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .final-text {
            font-size: clamp(1rem, 3vw, 1.2rem);
            color: #e9d5ff;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .promises {
            text-align: left;
            display: inline-block;
            margin-bottom: 25px;
        }

        .promise-item {
            font-size: 1.1rem;
            color: #c4b5fd;
            margin: 8px 0;
        }

        .final-signature {
            font-size: 1.4rem;
            color: #f9a8d4;
            font-weight: 600;
            margin-top: 20px;
        }

        .replay-btn {
            margin-top: 30px;
            padding: 10px 25px;
            font-size: 0.9rem;
            font-family: 'Quicksand', sans-serif;
            background: transparent;
            color: #a78bfa;
            border: 2px solid rgba(167, 139, 250, 0.4);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .replay-btn:hover {
            background: rgba(167, 139, 250, 0.2);
        }

        /* Floating Hearts Background */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            bottom: -50px;
            font-size: 20px;
            animation: floatUp 8s linear infinite;
            opacity: 0.6;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* ============ RESPONSIVE ============ */
        @media (max-width: 600px) {
            .moon {
                width: 50px;
                height: 50px;
                top: 20px;
                right: 20px;
            }

            .fence {
                gap: 20px;
            }

            .fence-post {
                height: 70px;
                width: 12px;
            }

            .fence-rail {
                height: 10px;
            }

            .fence-rail.top { top: 10px; }
            .fence-rail.bottom { top: 40px; }

            .sheep {
                transform: scale(0.8);
            }

            .message-card {
                padding: 20px 25px;
                width: 90%;
            }

            .message-text {
                font-size: 1.1rem;
            }

            .title-photo, .final-photo {
                width: 100px;
                height: 100px;
            }

            .final-photo {
                width: 140px;
                height: 140px;
            }
        }
    </style>
</head>
<body>
    <!-- Stars Background -->
    <div class="stars-container" id="stars"></div>

    <!-- Moon -->
    <div class="moon"></div>

    <!-- ============ TITLE SCREEN ============ -->
    <div class="scene active" id="title-screen">
        <div class="zzz-container">
            <div class="zzz">Z</div>
            <div class="zzz">z</div>
            <div class="zzz">z</div>
        </div>

        <!-- PHOTO PLACEHOLDER: Replace the span with an <img src="your-photo.jpg"> -->
        <div class="title-photo">
            <span>üíë</span>
        </div>

        <h1 class="main-title">A Bedtime Apology for Cristal</h1>
        <p class="subtitle">Tap to help me count my sorries...</p>

        <button class="start-btn" onclick="startGame()">Start</button>
    </div>

    <!-- ============ GAME SCREEN ============ -->
    <div class="scene" id="game-screen">
        <div class="progress-counter">
            <span id="sheep-count">0</span> of 8 sheep counted
        </div>

        <!-- Fence -->
        <div class="fence">
            <div class="fence-post">
                <div class="fence-rail top"></div>
                <div class="fence-rail bottom"></div>
            </div>
            <div class="fence-post"></div>
            <div class="fence-post"></div>
            <div class="fence-post"></div>
            <div class="fence-post"></div>
        </div>

        <!-- Ground -->
        <div class="ground"></div>

        <!-- Sheep (created via JS) -->
        <div class="sheep-container" id="sheep" onclick="catchSheep()">
            <div class="sheep">
                <svg viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
                    <!-- Fluffy wool body - multiple overlapping circles -->
                    <g class="wool-body">
                        <!-- Back wool puffs -->
                        <ellipse cx="85" cy="45" rx="18" ry="16" fill="#f5f5f5"/>
                        <ellipse cx="75" cy="35" rx="15" ry="13" fill="#fafafa"/>
                        <ellipse cx="90" cy="38" rx="12" ry="11" fill="#f0f0f0"/>
                        <!-- Main body wool -->
                        <ellipse cx="65" cy="48" rx="25" ry="20" fill="#ffffff"/>
                        <ellipse cx="55" cy="38" rx="18" ry="15" fill="#fafafa"/>
                        <ellipse cx="75" cy="42" rx="16" ry="14" fill="#f8f8f8"/>
                        <ellipse cx="60" cy="55" rx="20" ry="14" fill="#f5f5f5"/>
                        <!-- Top wool puffs -->
                        <ellipse cx="50" cy="32" rx="14" ry="12" fill="#ffffff"/>
                        <ellipse cx="68" cy="30" rx="12" ry="10" fill="#fafafa"/>
                        <ellipse cx="80" cy="32" rx="10" ry="9" fill="#f8f8f8"/>
                        <!-- Front wool -->
                        <ellipse cx="42" cy="45" rx="15" ry="14" fill="#ffffff"/>
                        <ellipse cx="38" cy="38" rx="10" ry="9" fill="#fafafa"/>
                    </g>

                    <!-- Tail - fluffy puff -->
                    <ellipse cx="100" cy="48" rx="10" ry="9" fill="#f0f0f0"/>
                    <ellipse cx="105" cy="45" rx="7" ry="6" fill="#fafafa"/>

                    <!-- Legs -->
                    <g class="legs">
                        <!-- Back legs -->
                        <path d="M78 62 L80 80 L76 80 L74 62" fill="#3d3d3d"/>
                        <ellipse cx="78" cy="80" rx="3" ry="2" fill="#2d2d2d"/>
                        <path d="M68 63 L70 80 L66 80 L64 63" fill="#3d3d3d"/>
                        <ellipse cx="68" cy="80" rx="3" ry="2" fill="#2d2d2d"/>
                        <!-- Front legs -->
                        <path d="M52 60 L54 80 L50 80 L48 60" fill="#3d3d3d"/>
                        <ellipse cx="52" cy="80" rx="3" ry="2" fill="#2d2d2d"/>
                        <path d="M42 58 L44 78 L40 78 L38 58" fill="#3d3d3d"/>
                        <ellipse cx="42" cy="78" rx="3" ry="2" fill="#2d2d2d"/>
                    </g>

                    <!-- Head -->
                    <g class="head">
                        <!-- Ears -->
                        <ellipse cx="18" cy="28" rx="8" ry="5" fill="#4a4a4a" transform="rotate(-30 18 28)"/>
                        <ellipse cx="38" cy="22" rx="8" ry="5" fill="#4a4a4a" transform="rotate(30 38 22)"/>
                        <ellipse cx="18" cy="28" rx="5" ry="3" fill="#ffb6c1" transform="rotate(-30 18 28)"/>
                        <ellipse cx="38" cy="22" rx="5" ry="3" fill="#ffb6c1" transform="rotate(30 38 22)"/>

                        <!-- Main head shape -->
                        <ellipse cx="28" cy="38" rx="18" ry="16" fill="#3d3d3d"/>

                        <!-- Fluffy top of head -->
                        <ellipse cx="28" cy="25" rx="12" ry="8" fill="#ffffff"/>
                        <ellipse cx="22" cy="28" rx="8" ry="6" fill="#fafafa"/>
                        <ellipse cx="34" cy="28" rx="8" ry="6" fill="#fafafa"/>

                        <!-- Eyes - closed/sleepy -->
                        <path d="M20 38 Q23 42 26 38" stroke="#1a1a1a" stroke-width="2" fill="none" stroke-linecap="round"/>
                        <path d="M30 38 Q33 42 36 38" stroke="#1a1a1a" stroke-width="2" fill="none" stroke-linecap="round"/>

                        <!-- Rosy cheeks -->
                        <ellipse cx="17" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                        <ellipse cx="39" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>

                        <!-- Cute nose -->
                        <ellipse cx="28" cy="48" rx="3" ry="2" fill="#2d2d2d"/>

                        <!-- Little smile -->
                        <path d="M25 52 Q28 55 31 52" stroke="#2d2d2d" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                    </g>
                </svg>
            </div>
        </div>

        <!-- Message Card -->
        <div class="message-card" id="message-card">
            <p class="message-text" id="message-text"></p>
            <button class="next-btn" onclick="nextSheep()">Next Sheep</button>
        </div>
    </div>

    <!-- ============ FINAL SCREEN ============ -->
    <div class="scene" id="final-screen">
        <div class="floating-hearts" id="floating-hearts"></div>

        <div class="sleeping-sheep-pile">
            <div class="mini-sheep" style="left: 0; top: 30px; transform: scale(0.4) rotate(-10deg);">
                <div class="sheep">
                    <svg viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
                        <g class="wool-body">
                            <ellipse cx="85" cy="45" rx="18" ry="16" fill="#f5f5f5"/>
                            <ellipse cx="65" cy="48" rx="25" ry="20" fill="#ffffff"/>
                            <ellipse cx="55" cy="38" rx="18" ry="15" fill="#fafafa"/>
                            <ellipse cx="50" cy="32" rx="14" ry="12" fill="#ffffff"/>
                            <ellipse cx="42" cy="45" rx="15" ry="14" fill="#ffffff"/>
                        </g>
                        <ellipse cx="100" cy="48" rx="10" ry="9" fill="#f0f0f0"/>
                        <g class="head">
                            <ellipse cx="28" cy="38" rx="18" ry="16" fill="#3d3d3d"/>
                            <ellipse cx="28" cy="25" rx="12" ry="8" fill="#ffffff"/>
                            <path d="M20 38 Q23 42 26 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <path d="M30 38 Q33 42 36 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <ellipse cx="17" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                            <ellipse cx="39" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="mini-sheep" style="left: 50px; top: 10px; transform: scale(0.45) rotate(5deg);">
                <div class="sheep">
                    <svg viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
                        <g class="wool-body">
                            <ellipse cx="85" cy="45" rx="18" ry="16" fill="#f5f5f5"/>
                            <ellipse cx="65" cy="48" rx="25" ry="20" fill="#ffffff"/>
                            <ellipse cx="55" cy="38" rx="18" ry="15" fill="#fafafa"/>
                            <ellipse cx="50" cy="32" rx="14" ry="12" fill="#ffffff"/>
                            <ellipse cx="42" cy="45" rx="15" ry="14" fill="#ffffff"/>
                        </g>
                        <ellipse cx="100" cy="48" rx="10" ry="9" fill="#f0f0f0"/>
                        <g class="head">
                            <ellipse cx="28" cy="38" rx="18" ry="16" fill="#3d3d3d"/>
                            <ellipse cx="28" cy="25" rx="12" ry="8" fill="#ffffff"/>
                            <path d="M20 38 Q23 42 26 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <path d="M30 38 Q33 42 36 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <ellipse cx="17" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                            <ellipse cx="39" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="mini-sheep" style="left: 100px; top: 25px; transform: scale(0.38) rotate(-5deg);">
                <div class="sheep">
                    <svg viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
                        <g class="wool-body">
                            <ellipse cx="85" cy="45" rx="18" ry="16" fill="#f5f5f5"/>
                            <ellipse cx="65" cy="48" rx="25" ry="20" fill="#ffffff"/>
                            <ellipse cx="55" cy="38" rx="18" ry="15" fill="#fafafa"/>
                            <ellipse cx="50" cy="32" rx="14" ry="12" fill="#ffffff"/>
                            <ellipse cx="42" cy="45" rx="15" ry="14" fill="#ffffff"/>
                        </g>
                        <ellipse cx="100" cy="48" rx="10" ry="9" fill="#f0f0f0"/>
                        <g class="head">
                            <ellipse cx="28" cy="38" rx="18" ry="16" fill="#3d3d3d"/>
                            <ellipse cx="28" cy="25" rx="12" ry="8" fill="#ffffff"/>
                            <path d="M20 38 Q23 42 26 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <path d="M30 38 Q33 42 36 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <ellipse cx="17" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                            <ellipse cx="39" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="mini-sheep" style="left: 150px; top: 15px; transform: scale(0.42) rotate(8deg);">
                <div class="sheep">
                    <svg viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
                        <g class="wool-body">
                            <ellipse cx="85" cy="45" rx="18" ry="16" fill="#f5f5f5"/>
                            <ellipse cx="65" cy="48" rx="25" ry="20" fill="#ffffff"/>
                            <ellipse cx="55" cy="38" rx="18" ry="15" fill="#fafafa"/>
                            <ellipse cx="50" cy="32" rx="14" ry="12" fill="#ffffff"/>
                            <ellipse cx="42" cy="45" rx="15" ry="14" fill="#ffffff"/>
                        </g>
                        <ellipse cx="100" cy="48" rx="10" ry="9" fill="#f0f0f0"/>
                        <g class="head">
                            <ellipse cx="28" cy="38" rx="18" ry="16" fill="#3d3d3d"/>
                            <ellipse cx="28" cy="25" rx="12" ry="8" fill="#ffffff"/>
                            <path d="M20 38 Q23 42 26 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <path d="M30 38 Q33 42 36 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <ellipse cx="17" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                            <ellipse cx="39" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="mini-sheep" style="left: 200px; top: 28px; transform: scale(0.4) rotate(-3deg);">
                <div class="sheep">
                    <svg viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
                        <g class="wool-body">
                            <ellipse cx="85" cy="45" rx="18" ry="16" fill="#f5f5f5"/>
                            <ellipse cx="65" cy="48" rx="25" ry="20" fill="#ffffff"/>
                            <ellipse cx="55" cy="38" rx="18" ry="15" fill="#fafafa"/>
                            <ellipse cx="50" cy="32" rx="14" ry="12" fill="#ffffff"/>
                            <ellipse cx="42" cy="45" rx="15" ry="14" fill="#ffffff"/>
                        </g>
                        <ellipse cx="100" cy="48" rx="10" ry="9" fill="#f0f0f0"/>
                        <g class="head">
                            <ellipse cx="28" cy="38" rx="18" ry="16" fill="#3d3d3d"/>
                            <ellipse cx="28" cy="25" rx="12" ry="8" fill="#ffffff"/>
                            <path d="M20 38 Q23 42 26 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <path d="M30 38 Q33 42 36 38" stroke="#1a1a1a" stroke-width="2" fill="none"/>
                            <ellipse cx="17" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                            <ellipse cx="39" cy="44" rx="5" ry="3" fill="#ffb6c1" opacity="0.6"/>
                        </g>
                    </svg>
                </div>
            </div>
        </div>

        <!-- PHOTO PLACEHOLDER: Replace the span with an <img src="your-couple-photo.jpg"> -->
        <div class="final-photo">
            <span>üíï</span>
        </div>

        <div class="final-message">
            <h2 class="final-title">Cristal, mi amor...</h2>
            <p class="final-text">
                I'm so sorry you slept alone, cold and sad.
                <br>I never want you to feel that way again.
            </p>
            <div class="promises">
                <p class="promise-item">üîã I promise to always charge my phone</p>
                <p class="promise-item">üì± I promise to keep our call alive</p>
                <p class="promise-item">üíï I promise to be there when you wake up</p>
            </div>
            <p class="final-signature">Te amo siempre ‚ú®</p>
        </div>

        <button class="replay-btn" onclick="replay()">Count sheep again?</button>
    </div>

    <script>
        // ============ CONFIGURATION ============
        const messages = [
            "Hour 1 alone... I'm so sorry my phone betrayed us üò¢",
            "Hour 2... I tried calling you back, I promise I did üì±",
            "Hour 3... My heart was still on that call with you üíï",
            "Hour 4... Even in my sleep, I was reaching for you",
            "Hour 5... The night felt so empty without your breathing",
            "Hour 6... I dreamed we were still talking üí≠",
            "Hour 7... Waking up without you online broke my heart",
            "Hour 8... Every minute apart made me miss you more üíó"
        ];

        // ============ STATE ============
        let currentSheep = 0;
        let sheepCaught = false;
        let gameStarted = false;

        // ============ INITIALIZATION ============
        function init() {
            createStars();
        }

        function createStars() {
            const container = document.getElementById('stars');
            const starCount = 80;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 70 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                star.style.setProperty('--delay', (Math.random() * 5) + 's');
                container.appendChild(star);
            }
        }

        // ============ GAME FLOW ============
        function startGame() {
            document.getElementById('title-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            gameStarted = true;
            setTimeout(launchSheep, 500);
        }

        function launchSheep() {
            if (currentSheep >= messages.length) {
                showFinalScreen();
                return;
            }

            const sheep = document.getElementById('sheep');
            sheep.style.display = 'block';
            sheep.classList.remove('clicked');
            sheep.classList.remove('jumping');

            // Reset position
            sheep.style.left = '-150px';
            sheep.style.bottom = '25%';

            // Trigger reflow
            void sheep.offsetWidth;

            // Start jump animation
            sheep.classList.add('jumping');
            sheepCaught = false;
        }

        function catchSheep() {
            if (sheepCaught || currentSheep >= messages.length) return;

            sheepCaught = true;
            const sheep = document.getElementById('sheep');

            // Get current position for hearts burst
            const rect = sheep.getBoundingClientRect();
            createHeartsBurst(rect.left + rect.width/2, rect.top + rect.height/2);

            // Poof the sheep
            sheep.classList.add('clicked');

            // Show message
            setTimeout(() => {
                sheep.style.display = 'none';
                showMessage(messages[currentSheep]);
            }, 400);
        }

        function createHeartsBurst(x, y) {
            const hearts = ['üíï', 'üíó', 'üíñ', '‚ú®', 'üíú', 'ü§ç'];
            const container = document.getElementById('game-screen');

            for (let i = 0; i < 8; i++) {
                const heart = document.createElement('div');
                heart.className = 'burst-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.position = 'fixed';
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';

                const angle = (i / 8) * Math.PI * 2;
                const distance = 80 + Math.random() * 40;
                heart.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                heart.style.setProperty('--ty', Math.sin(angle) * distance + 'px');

                container.appendChild(heart);

                setTimeout(() => heart.remove(), 1000);
            }
        }

        function showMessage(text) {
            const card = document.getElementById('message-card');
            const messageText = document.getElementById('message-text');
            messageText.textContent = text;
            card.classList.add('show');
        }

        function nextSheep() {
            const card = document.getElementById('message-card');
            card.classList.remove('show');

            currentSheep++;
            document.getElementById('sheep-count').textContent = currentSheep;

            setTimeout(() => {
                if (currentSheep >= messages.length) {
                    showFinalScreen();
                } else {
                    launchSheep();
                }
            }, 500);
        }

        function showFinalScreen() {
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('final-screen').classList.add('active');
            createFloatingHearts();
        }

        function createFloatingHearts() {
            const container = document.getElementById('floating-hearts');
            const hearts = ['üíï', 'üíó', 'üíñ', 'üíú', 'ü§ç'];

            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 8 + 's';
                heart.style.fontSize = (15 + Math.random() * 15) + 'px';
                container.appendChild(heart);
            }
        }

        function replay() {
            // Reset state
            currentSheep = 0;
            sheepCaught = false;
            document.getElementById('sheep-count').textContent = '0';
            document.getElementById('floating-hearts').innerHTML = '';

            // Switch screens
            document.getElementById('final-screen').classList.remove('active');
            document.getElementById('title-screen').classList.add('active');
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>
